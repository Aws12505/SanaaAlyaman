import{r as F,u as I,j as e,H as k}from"./app-DoSZpP_U.js";import{C as o,a as m,b as h,c as x,d as g}from"./card-DI4NCw_n.js";import{B as p,X as A}from"./index-DlmgT6Eg.js";import{I as j}from"./input-CTGXkNPt.js";import{L as l}from"./label-B9GnpJkL.js";import{T as f}from"./textarea-B7cEZX0B.js";import{U as _,S as v}from"./switch-D9kaicC0.js";import{S as L,a as P,b as E,c as B,d as H}from"./select-DCNE8GgQ.js";import{A as T}from"./app-layout-BwujotZH.js";import{A as U}from"./arrow-left-n772EUcA.js";import"./app-Cb5yk_6x.js";import"./createLucideIcon-CzcaZuQI.js";import"./index-BfxZPQpB.js";import"./check-B8pZigyg.js";const M=[{title:"Dashboard",href:"/admin"},{title:"Dishes",href:"/admin/dishes"},{title:"Create Dish",href:"/admin/dishes/create"}];function ee({categories:N}){const[d,b]=F.useState([]),{data:r,setData:i,post:C,processing:y,errors:a}=I({name:"",description:"",ingredients:"",allergen_info:"",price:0,images:[],category_id:"",is_signature:!1,is_featured:!1,is_available:!0,sort_order:0}),w=s=>{const t=Array.from(s.target.files||[]);t.length>0&&(i("images",[...r.images,...t]),t.forEach(u=>{const n=new FileReader;n.onloadend=()=>{b(c=>[...c,n.result])},n.readAsDataURL(u)}))},D=s=>{const t=r.images.filter((n,c)=>c!==s),u=d.filter((n,c)=>c!==s);i("images",t),b(u)},S=s=>{s.preventDefault(),C("/admin/dishes",{forceFormData:!0})};return e.jsxs(T,{breadcrumbs:M,children:[e.jsx(k,{title:"Create Dish"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto p-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(p,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:"/admin/dishes",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Back to Dishes"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create Dish"}),e.jsx("p",{className:"text-muted-foreground",children:"Add a new dish to your menu"})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(h,{children:"Basic Information"}),e.jsx(x,{children:"Essential details about the dish"})]}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name",children:"Dish Name"}),e.jsx(j,{id:"name",value:r.name,onChange:s=>i("name",s.target.value),placeholder:"Enter dish name",className:a.name?"border-red-500":""}),a.name&&e.jsx("p",{className:"text-sm text-red-600",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"category_id",children:"Category"}),e.jsxs(L,{value:r.category_id.toString(),onValueChange:s=>i("category_id",parseInt(s)),children:[e.jsx(P,{className:a.category_id?"border-red-500":"",children:e.jsx(E,{placeholder:"Select a category"})}),e.jsx(B,{children:N.map(s=>e.jsx(H,{value:s.id.toString(),children:s.name},s.id))})]}),a.category_id&&e.jsx("p",{className:"text-sm text-red-600",children:a.category_id})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",children:"Description"}),e.jsx(f,{id:"description",value:r.description,onChange:s=>i("description",s.target.value),placeholder:"Describe the dish",rows:4,className:a.description?"border-red-500":""}),a.description&&e.jsx("p",{className:"text-sm text-red-600",children:a.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"ingredients",children:"Ingredients"}),e.jsx(f,{id:"ingredients",value:r.ingredients,onChange:s=>i("ingredients",s.target.value),placeholder:"List the main ingredients",rows:3,className:a.ingredients?"border-red-500":""}),a.ingredients&&e.jsx("p",{className:"text-sm text-red-600",children:a.ingredients})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"allergen_info",children:"Allergen Information"}),e.jsx(f,{id:"allergen_info",value:r.allergen_info,onChange:s=>i("allergen_info",s.target.value),placeholder:"List allergens and dietary information",rows:2,className:a.allergen_info?"border-red-500":""}),a.allergen_info&&e.jsx("p",{className:"text-sm text-red-600",children:a.allergen_info})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"price",children:"Price ($)"}),e.jsx(j,{id:"price",type:"number",step:"0.01",value:r.price,onChange:s=>i("price",parseFloat(s.target.value)),placeholder:"0.00",className:a.price?"border-red-500":""}),a.price&&e.jsx("p",{className:"text-sm text-red-600",children:a.price})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"sort_order",children:"Sort Order"}),e.jsx(j,{id:"sort_order",type:"number",value:r.sort_order,onChange:s=>i("sort_order",parseInt(s.target.value)),placeholder:"0",className:a.sort_order?"border-red-500":""}),a.sort_order&&e.jsx("p",{className:"text-sm text-red-600",children:a.sort_order})]})]})]})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(h,{children:"Dish Images"}),e.jsx(x,{children:"Upload up to 5 images of this dish"})]}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-4",children:[d.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:d.map((s,t)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s,alt:`Preview ${t+1}`,className:"w-full h-32 object-cover rounded-lg"}),e.jsx(p,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0",onClick:()=>D(t),children:e.jsx(A,{className:"h-3 w-3"})}),t===0&&e.jsx("div",{className:"absolute bottom-1 left-1 bg-blue-600 text-white text-xs px-2 py-1 rounded",children:"Main"})]},t))}),r.images.length<5&&e.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6 text-center",children:[e.jsx(_,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Click to upload dish images (",r.images.length,"/5)"]}),e.jsx(j,{type:"file",accept:"image/*",multiple:!0,onChange:w,className:"max-w-xs mx-auto"})]}),a.images&&e.jsx("p",{className:"text-sm text-red-600",children:a.images})]})})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(h,{children:"Status & Features"}),e.jsx(x,{children:"Configure dish availability and special features"})]}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{htmlFor:"is_available",children:"Available"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Customers can order this dish"})]}),e.jsx(v,{id:"is_available",checked:r.is_available,onCheckedChange:s=>i("is_available",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{htmlFor:"is_signature",children:"Signature Dish"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Mark as one of your signature dishes"})]}),e.jsx(v,{id:"is_signature",checked:r.is_signature,onCheckedChange:s=>i("is_signature",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{htmlFor:"is_featured",children:"Featured Dish"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Show in featured section on homepage"})]}),e.jsx(v,{id:"is_featured",checked:r.is_featured,onCheckedChange:s=>i("is_featured",s)})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(p,{type:"button",variant:"outline",asChild:!0,children:e.jsx("a",{href:"/admin/dishes",children:"Cancel"})}),e.jsx(p,{type:"submit",disabled:y,children:y?"Creating...":"Create Dish"})]})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(o,{className:"sticky top-6",children:[e.jsxs(m,{children:[e.jsx(h,{children:"Preview"}),e.jsx(x,{children:"How this dish will appear to customers"})]}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-video bg-muted rounded-lg overflow-hidden",children:d.length>0?e.jsx("img",{src:d[0],alt:"Main preview",className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:e.jsx(_,{className:"h-8 w-8"})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:r.name||"Dish Name"}),r.is_signature&&e.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded",children:"Signature"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description||"Dish description will appear here"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["$",r.price.toFixed(2)]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:N.find(s=>s.id===r.category_id)?.name||"Category"})]})]})]})})]})})]})]})]})}export{ee as default};
