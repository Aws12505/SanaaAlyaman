import{r as T,u as A,j as e,H as E,L as B,b as h}from"./app-B_1VDoyx.js";import{C as t,a as i,b as d,c as v,d as n}from"./card-BxLjCARl.js";import{B as j}from"./badge-D2xwWrEH.js";import{B as a}from"./index-DyROoi-u.js";import{T as H}from"./textarea-BhKlqBbV.js";import{L as l}from"./label-BgWsNZMd.js";import{A as z}from"./app-layout-DmmvGbs7.js";import{A as I}from"./arrow-left-0z_7B_JC.js";import{c as P}from"./createLucideIcon-CB7xcAqa.js";import{T as F}from"./trash-2-cvb6K7Zy.js";import{U as w}from"./user-B2LGiBnj.js";import{C as y}from"./calendar-Yh_hRui8.js";import{C as b}from"./copy-CGQlafTh.js";import{E as C,S as U}from"./send-CXtbcyue.js";import{M as S}from"./mail-open-BO79GX9-.js";import{C as k}from"./circle-check-big-DfwCm0QY.js";import{M as u}from"./mail-DWSDnTkV.js";import{P as O}from"./phone-BZCvhA2d.js";import{C as Y}from"./clock-BVLWsQTj.js";import"./app-DTEKj0A7.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],p=P("Reply",q);function he({contact:s}){const[m,c]=T.useState(!1),D=[{title:"Dashboard",href:"/admin"},{title:"Contacts",href:"/admin/contacts"},{title:`Message from ${s.name}`,href:`/admin/contacts/${s.id}`}],{data:R,setData:M,post:$,processing:f}=A({reply_message:""}),L=()=>{confirm("Are you sure you want to delete this contact message? This action cannot be undone.")&&h.delete(`/admin/contacts/${s.id}`,{onSuccess:()=>{h.visit("/admin/contacts")}})},x=r=>{h.patch(`/admin/contacts/${s.id}/status`,{status:r})},_=r=>{r.preventDefault(),$(`/admin/contacts/${s.id}/reply`,{onSuccess:()=>{c(!1),x("responded")}})},g=r=>{navigator.clipboard.writeText(r)},o=r=>{switch(r){case"pending":return"bg-orange-100 text-orange-800 border-orange-200";case"read":return"bg-blue-100 text-blue-800 border-blue-200";case"responded":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=(r=>{switch(r){case"pending":return Y;case"read":return S;case"responded":return k;default:return u}})(s.status);return e.jsxs(z,{breadcrumbs:D,children:[e.jsx(E,{title:`Message from ${s.name}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(a,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(B,{href:"/admin/contacts",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Back to Messages"]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Contact Message"}),e.jsxs(j,{className:`${o(s.status)}`,children:[e.jsx(N,{className:"w-3 h-3 mr-1"}),s.status]})]}),e.jsxs("p",{className:"text-muted-foreground",children:["from ",s.name]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(a,{variant:"outline",onClick:()=>c(!m),children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Reply"]}),e.jsxs(a,{variant:"destructive",onClick:L,children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(t,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${o(s.status)}`,children:e.jsx(w,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx(d,{className:"text-xl",children:s.name}),e.jsx(v,{className:"text-base",children:s.email})]})]}),e.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1 justify-end mb-1",children:[e.jsx(y,{className:"w-4 h-4"}),new Date(s.created_at).toLocaleDateString()]}),e.jsx("div",{children:new Date(s.created_at).toLocaleTimeString()})]})]})}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Message"}),e.jsx("div",{className:"mt-2 p-4 bg-muted/50 rounded-lg border-l-4 border-blue-500",children:e.jsx("p",{className:"text-base leading-relaxed whitespace-pre-wrap",children:s.message})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Contact Email"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-base",children:s.email}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>g(s.email),children:e.jsx(b,{className:"w-3 h-3"})}),e.jsx(a,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx("a",{href:`mailto:${s.email}`,children:e.jsx(C,{className:"w-3 h-3"})})})]})]}),s.phone&&e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Phone Number"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-base",children:s.phone}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>g(s.phone),children:e.jsx(b,{className:"w-3 h-3"})}),e.jsx(a,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx("a",{href:`tel:${s.phone}`,children:e.jsx(C,{className:"w-3 h-3"})})})]})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsxs(j,{className:`${o(s.status)}`,children:[e.jsx(N,{className:"w-3 h-3 mr-1"}),s.status]})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Received"}),e.jsx("p",{children:new Date(s.created_at).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),e.jsx("p",{children:new Date(s.updated_at).toLocaleString()})]})]})]})})]}),m&&e.jsxs(t,{children:[e.jsxs(i,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"Send Reply"]}),e.jsxs(v,{children:["Send a response to ",s.name," at ",s.email]})]}),e.jsx(n,{children:e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"reply_message",children:"Reply Message"}),e.jsx(H,{id:"reply_message",value:R.reply_message,onChange:r=>M("reply_message",r.target.value),placeholder:`Dear ${s.name},

Thank you for contacting us...`,rows:8,className:"min-h-32"})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsxs(a,{type:"submit",disabled:f,children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),f?"Sending...":"Send Reply"]})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(t,{children:[e.jsx(i,{children:e.jsx(d,{children:"Quick Actions"})}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-3",children:[s.status==="pending"&&e.jsxs(a,{className:"w-full",onClick:()=>x("read"),children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Mark as Read"]}),s.status!=="responded"&&e.jsxs(a,{className:"w-full",onClick:()=>x("responded"),children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Mark as Responded"]}),e.jsxs(a,{variant:"outline",className:"w-full",onClick:()=>c(!m),children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),m?"Hide Reply":"Send Reply"]}),e.jsx(a,{variant:"outline",className:"w-full",asChild:!0,children:e.jsxs("a",{href:`mailto:${s.email}?subject=Re: Your inquiry&body=Dear ${s.name},%0D%0A%0D%0AThank you for contacting The Golden Spoon...`,children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Open in Email Client"]})})]})})]}),e.jsxs(t,{children:[e.jsx(i,{children:e.jsx(d,{children:"Contact Information"})}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Customer Name"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-medium truncate",children:s.email}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email Address"})]})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.phone}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone Number"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Message Received"})]})]})]})})]}),e.jsxs(t,{children:[e.jsx(i,{children:e.jsx(d,{children:"Message Details"})}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(j,{className:`text-xs ${o(s.status)}`,children:s.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Word Count"}),e.jsxs("span",{className:"font-semibold",children:[s.message.split(" ").length," words"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Character Count"}),e.jsxs("span",{className:"font-semibold",children:[s.message.length," chars"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Has Phone"}),e.jsx("span",{className:"font-semibold",children:s.phone?"Yes":"No"})]})]})})]})]})]})]})]})}export{he as default};
