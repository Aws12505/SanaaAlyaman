import{r as o,j as e,a as te,H as re,L as $,b as I}from"./app-Cxt0utQE.js";import{C as w,a as S,b as E,d as y}from"./card-CH0fhSIt.js";import{B as ae}from"./badge-C2qny7Nm.js";import{c as ne,b as ce,P as A,u as le,a as q,B as R}from"./index-Cxe2JAIB.js";import{I as ie}from"./input-vM-Ex7my.js";import{S as de,a as oe,b as me,c as xe,d as P}from"./select-CjjITk3P.js";import{c as he,u as G,a as ue}from"./createLucideIcon-Db5qSUaR.js";import{u as fe}from"./index-BEk2UiLn.js";import{u as pe,A as je,D as ge,a as be,b as Ce,c as _}from"./app-layout-Bxadt-Zd.js";import{C as ve}from"./check-qGtoZ9Xk.js";import{T as H}from"./trash-2-CRndeXOo.js";import{M}from"./mail-DaMjAUqg.js";import{C as z}from"./clock-CX6kQ13z.js";import{M as T}from"./mail-open-7KPH-sGp.js";import{C as B}from"./circle-check-big-Dcrpr48U.js";import{F as Ne}from"./filter-Codq4wJC.js";import{S as ke}from"./search-CjWbFBRt.js";import{P as we}from"./phone-VOuvbymd.js";import{C as ye}from"./calendar-ZX8taaT2.js";import{E as O}from"./eye-DuUY1ydr.js";import{E as Se}from"./ellipsis-DTGDpCDG.js";import"./app-B88Y09HE.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Re=he("Download",Ee);var D="Checkbox",[Ie,ts]=ne(D),[Pe,F]=Ie(D);function _e(t){const{__scopeCheckbox:n,checked:c,children:x,defaultChecked:l,disabled:r,form:h,name:p,onCheckedChange:a,required:m,value:j="on",internal_do_not_use_render:u}=t,[f,N]=le({prop:c,defaultProp:l??!1,onChange:a,caller:D}),[g,b]=o.useState(null),[C,i]=o.useState(null),s=o.useRef(!1),d=g?!!h||!!g.closest("form"):!0,k={checked:f,disabled:r,setChecked:N,control:g,setControl:b,name:p,form:h,value:j,hasConsumerStoppedPropagationRef:s,required:m,defaultChecked:v(l)?!1:l,isFormControl:d,bubbleInput:C,setBubbleInput:i};return e.jsx(Pe,{scope:n,...k,children:Me(u)?u(k):x})}var K="CheckboxTrigger",U=o.forwardRef(({__scopeCheckbox:t,onKeyDown:n,onClick:c,...x},l)=>{const{control:r,value:h,disabled:p,checked:a,required:m,setControl:j,setChecked:u,hasConsumerStoppedPropagationRef:f,isFormControl:N,bubbleInput:g}=F(K,t),b=G(l,j),C=o.useRef(a);return o.useEffect(()=>{const i=r?.form;if(i){const s=()=>u(C.current);return i.addEventListener("reset",s),()=>i.removeEventListener("reset",s)}},[r,u]),e.jsx(A.button,{type:"button",role:"checkbox","aria-checked":v(a)?"mixed":a,"aria-required":m,"data-state":Z(a),"data-disabled":p?"":void 0,disabled:p,value:h,...x,ref:b,onKeyDown:q(n,i=>{i.key==="Enter"&&i.preventDefault()}),onClick:q(c,i=>{u(s=>v(s)?!0:!s),g&&N&&(f.current=i.isPropagationStopped(),f.current||i.stopPropagation())})})});U.displayName=K;var X=o.forwardRef((t,n)=>{const{__scopeCheckbox:c,name:x,checked:l,defaultChecked:r,required:h,disabled:p,value:a,onCheckedChange:m,form:j,...u}=t;return e.jsx(_e,{__scopeCheckbox:c,checked:l,defaultChecked:r,disabled:p,required:h,onCheckedChange:m,name:x,form:j,value:a,internal_do_not_use_render:({isFormControl:f})=>e.jsxs(e.Fragment,{children:[e.jsx(U,{...u,ref:n,__scopeCheckbox:c}),f&&e.jsx(Y,{__scopeCheckbox:c})]})})});X.displayName=D;var J="CheckboxIndicator",Q=o.forwardRef((t,n)=>{const{__scopeCheckbox:c,forceMount:x,...l}=t,r=F(J,c);return e.jsx(ce,{present:x||v(r.checked)||r.checked===!0,children:e.jsx(A.span,{"data-state":Z(r.checked),"data-disabled":r.disabled?"":void 0,...l,ref:n,style:{pointerEvents:"none",...t.style}})})});Q.displayName=J;var W="CheckboxBubbleInput",Y=o.forwardRef(({__scopeCheckbox:t,...n},c)=>{const{control:x,hasConsumerStoppedPropagationRef:l,checked:r,defaultChecked:h,required:p,disabled:a,name:m,value:j,form:u,bubbleInput:f,setBubbleInput:N}=F(W,t),g=G(c,N),b=fe(r),C=pe(x);o.useEffect(()=>{const s=f;if(!s)return;const d=window.HTMLInputElement.prototype,L=Object.getOwnPropertyDescriptor(d,"checked").set,ee=!l.current;if(b!==r&&L){const se=new Event("click",{bubbles:ee});s.indeterminate=v(r),L.call(s,v(r)?!1:r),s.dispatchEvent(se)}},[f,b,r,l]);const i=o.useRef(v(r)?!1:r);return e.jsx(A.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??i.current,required:p,disabled:a,name:m,value:j,form:u,...n,tabIndex:-1,ref:g,style:{...n.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Y.displayName=W;function Me(t){return typeof t=="function"}function v(t){return t==="indeterminate"}function Z(t){return v(t)?"indeterminate":t?"checked":"unchecked"}function V({className:t,...n}){return e.jsx(X,{"data-slot":"checkbox",className:ue("peer border-input data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:e.jsx(Q,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(ve,{className:"size-3.5"})})})}const De=[{title:"Dashboard",href:"/admin"},{title:"Contacts",href:"/admin/contacts"}];function rs({contacts:t,filters:n,stats:c}){const{flash:x}=te().props,[l,r]=o.useState(n.search||""),[h,p]=o.useState(n.status||void 0),[a,m]=o.useState([]),j=s=>{s.preventDefault();const d={};l&&(d.search=l),h&&(d.status=h),I.get("/admin/contacts",d)},u=s=>{confirm("Are you sure you want to delete this contact message?")&&I.delete(`/admin/contacts/${s}`)},f=(s,d)=>{I.patch(`/admin/contacts/${s}/status`,{status:d})},N=(s,d)=>{m(d?[...a,s]:a.filter(k=>k!==s))},g=s=>{m(s?t.data.map(d=>d.id):[])},b=()=>{a.length!==0&&confirm(`Are you sure you want to delete ${a.length} contact messages?`)&&I.delete("/admin/contacts/bulk-delete",{data:{ids:a},onSuccess:()=>m([])})},C=s=>{switch(s){case"pending":return"bg-orange-100 text-orange-800 border-orange-200";case"read":return"bg-blue-100 text-blue-800 border-blue-200";case"responded":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},i=s=>{switch(s){case"pending":return z;case"read":return T;case"responded":return B;default:return M}};return e.jsxs(je,{breadcrumbs:De,children:[e.jsx(re,{title:"Contact Messages"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto p-6",children:[x?.success&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:x.success}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Contact Messages"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage customer inquiries and messages"})]}),e.jsxs("div",{className:"flex gap-2",children:[a.length>0&&e.jsxs(R,{variant:"destructive",onClick:b,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Delete Selected (",a.length,")"]}),e.jsxs(R,{variant:"outline",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(w,{children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(E,{className:"text-sm font-medium",children:"Total Messages"}),e.jsx(M,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(y,{children:e.jsx("div",{className:"text-2xl font-bold",children:c.total})})]}),e.jsxs(w,{children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(E,{className:"text-sm font-medium",children:"Pending"}),e.jsx(z,{className:"h-4 w-4 text-orange-600"})]}),e.jsx(y,{children:e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:c.pending})})]}),e.jsxs(w,{children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(E,{className:"text-sm font-medium",children:"Read"}),e.jsx(T,{className:"h-4 w-4 text-blue-600"})]}),e.jsx(y,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c.read})})]}),e.jsxs(w,{children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(E,{className:"text-sm font-medium",children:"Responded"}),e.jsx(B,{className:"h-4 w-4 text-green-600"})]}),e.jsx(y,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.responded})})]})]}),e.jsxs(w,{children:[e.jsx(S,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(y,{children:e.jsxs("form",{onSubmit:j,className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ie,{placeholder:"Search messages by name, email, or content...",value:l,onChange:s=>r(s.target.value)})}),e.jsxs(de,{value:h,onValueChange:s=>p(s==="all"?void 0:s),children:[e.jsx(oe,{className:"w-40",children:e.jsx(me,{placeholder:"All Status"})}),e.jsxs(xe,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"read",children:"Read"}),e.jsx(P,{value:"responded",children:"Responded"})]})]}),e.jsxs(R,{type:"submit",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Search"]})]})})]}),e.jsxs(w,{children:[e.jsx(S,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{children:"Messages"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{checked:a.length===t.data.length&&t.data.length>0,onCheckedChange:g}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Select All"})]})]})}),e.jsx(y,{className:"p-0",children:e.jsx("div",{className:"space-y-1",children:t.data.map(s=>{const d=i(s.status);return e.jsxs("div",{className:`flex items-center gap-4 p-4 border-b hover:bg-muted/50 transition-colors ${s.status==="pending"?"bg-orange-50/50":""}`,children:[e.jsx(V,{checked:a.includes(s.id),onCheckedChange:k=>N(s.id,k)}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${C(s.status)}`,children:e.jsx(d,{className:"w-5 h-5"})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),e.jsx(ae,{className:`text-xs ${C(s.status)}`,children:s.status})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-3 h-3"}),s.email]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(we,{className:"w-3 h-3"}),s.phone]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:"w-3 h-3"}),new Date(s.created_at).toLocaleDateString()]})]}),e.jsx("p",{className:"text-muted-foreground line-clamp-2 text-sm",children:s.message})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",asChild:!0,children:e.jsx($,{href:`/admin/contacts/${s.id}`,children:e.jsx(O,{className:"h-4 w-4"})})}),e.jsxs(ge,{children:[e.jsx(be,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"sm",children:e.jsx(Se,{className:"h-4 w-4"})})}),e.jsxs(Ce,{children:[e.jsx(_,{asChild:!0,children:e.jsxs($,{href:`/admin/contacts/${s.id}`,children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"View Details"]})}),s.status==="pending"&&e.jsxs(_,{onClick:()=>f(s.id,"read"),children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Mark as Read"]}),s.status!=="responded"&&e.jsxs(_,{onClick:()=>f(s.id,"responded"),children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Mark as Responded"]}),e.jsxs(_,{className:"text-red-600",onClick:()=>u(s.id),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]})})]},s.id)})})})]}),t.data.length===0&&e.jsx(w,{children:e.jsxs(y,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(M,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No messages found"}),e.jsx("p",{className:"text-muted-foreground text-center mb-4",children:n.search||n.status?"Try adjusting your filters to find what you're looking for.":"No customer messages have been received yet."})]})})]})]})}export{rs as default};
